<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1f2937">
    <title>Flash Cards Pro</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎯</text></svg>">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
        }
        html, body { 
            margin: 0; 
            padding: 0; 
            width: 100%; 
            height: 100%; 
            overflow-x: hidden; 
            font-family: system-ui, -apple-system, sans-serif;
        }
        #root {
            min-height: 100vh;
        }
        .perspective-1000 { perspective: 1000px; }
        .transform-style-preserve-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .line-clamp-2 { 
            display: -webkit-box; 
            -webkit-line-clamp: 2; 
            -webkit-box-orient: vertical; 
            overflow: hidden; 
        }
        button:active { transform: scale(0.98); }
        @media screen and (max-width: 768px) { 
            input, textarea, select { font-size: 16px !important; } 
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useMemo, useCallback, createContext, useContext } = React;

        // Simple Icons
        const Icon = ({ name, className = "w-5 h-5" }) => {
            const icons = {
                search: "🔍", plus: "➕", moon: "🌙", sun: "☀️", menu: "☰",
                cards: "🎴", study: "📚", stats: "📊", edit: "✏️", delete: "🗑️",
                check: "✅", x: "❌", clock: "⏰", volume: "🔊", brain: "🧠",
                zap: "⚡", target: "🎯", trend: "📈"
            };
            
            return React.createElement('span', {
                className: `inline-block ${className}`,
                style: { fontSize: '1.2em' }
            }, icons[name] || "📝");
        };

        // Context
        const FlashCardsContext = createContext(null);
        const useFlashCards = () => {
            const context = useContext(FlashCardsContext);
            if (!context) throw new Error('useFlashCards must be used within FlashCardsProvider');
            return context;
        };

        // Storage Service
        class StorageService {
            static STORAGE_KEY = 'flashcards-pro-enhanced';
            
            static save(state) {
                try {
                    const data = { ...state, categories: Array.from(state.categories) };
                    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));
                } catch (error) {
                    console.error('Failed to save data:', error);
                }
            }
            
            static load() {
                try {
                    const data = localStorage.getItem(this.STORAGE_KEY);
                    if (!data) return null;
                    const parsed = JSON.parse(data);
                    return { ...parsed, categories: new Set(parsed.categories || []) };
                } catch (error) {
                    console.error('Failed to load data:', error);
                    return null;
                }
            }
            
            static exportData(state) {
                const data = {
                    version: '3.0',
                    exported: new Date().toISOString(),
                    ...state,
                    categories: Array.from(state.categories),
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `flashcards-pro-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
            }
        }

        // Card Data - All 73 Questions
        const createDefaultCards = () => [
            {
                id: '1',
                question: 'Q1) Explain why MUST there be a safe system of work.',
                answer: 'It is a LEGAL requirement under the HASWA 1974.',
                category: 'Crane Operations',
                tags: ['safety', 'legal', 'HASWA'],
                difficulty: 'medium'
            },
            {
                id: '2',
                question: 'Q2) a) State the legislation and the regulation therein that refers to the stability of cranes and b) Which regulation states the requirement for all lifting operations to be properly planned?',
                answer: 'a) LOLER Regulation 4\nb) LOLER Regulation 8',
                category: 'Crane Operations',
                tags: ['LOLER', 'legislation', 'planning'],
                difficulty: 'medium'
            },
            {
                id: '3',
                question: 'Q3) a) State the regulation number for the lifting of persons under LOLER 1998 and b) List FIVE requirements to be within a procedure.',
                answer: 'a) LOLER Regulation 5\nb) 1. Has suitable devices to prevent the risk of carrier falling\n2. A person trapped in any carrier can be freed\n3. The carrier has an enhanced safety coefficient suspension rope or chain\n4. The rope or chain is inspected by a competent person every working day\n5. The use of carrier clearly marked for personnel use',
                category: 'Crane Operations',
                tags: ['LOLER', 'personnel', 'safety'],
                difficulty: 'hard'
            },
            {
                id: '4',
                question: 'Q4) a) What is the Factor of Safety when lifting personnel and b) What needs to be taken into account with wind speeds?',
                answer: 'a) 2:1\nb) maximum wind speeds of 7m/s',
                category: 'Crane Operations',
                tags: ['safety', 'personnel', 'wind'],
                difficulty: 'medium'
            },
            {
                id: '5',
                question: 'Q5) How does the guidance in LOLER 1998 (L 113) describe the difference between installed and positioned?',
                answer: 'Installed – fixed in location (tower crane)\nPositioned – manoeuvred in to place (mobile crane)',
                category: 'Crane Operations',
                tags: ['LOLER', 'definitions', 'crane types'],
                difficulty: 'easy'
            },
            {
                id: '6',
                question: 'Q6) a) What is the minimum recommended distance that is allowed between the counterweight(s) of any lifting equipment and an object/structure and b) What measure must be taken if the distance is less?',
                answer: 'a) Minimum 600 mm.\nb) Prevent access',
                category: 'Crane Operations',
                tags: ['counterweight', 'distance', 'safety'],
                difficulty: 'medium'
            },
            {
                id: '7',
                question: 'Q7) Who has overall control of the lifting operation?',
                answer: 'The Appointed Person',
                category: 'Crane Operations',
                tags: ['appointed person', 'control', 'responsibility'],
                difficulty: 'easy'
            },
            {
                id: '8',
                question: 'Q8) What IS the definition of a competent person as stated by Codes of Practice?',
                answer: 'A person who has practical and theoretical knowledge as well as planning experience of crane and equipment.',
                category: 'Crane Operations',
                tags: ['competent person', 'definitions', 'qualifications'],
                difficulty: 'medium'
            },
            {
                id: '9',
                question: 'Q9) Which part of BS 7121 is specific to mobile cranes?',
                answer: 'Sections 2-3',
                category: 'Crane Operations',
                tags: ['BS 7121', 'mobile cranes', 'standards'],
                difficulty: 'easy'
            },
            {
                id: '10',
                question: 'Q10) When a crane company hires out a crane, name TWO main legal requirements the hire company must meet regarding the crane and operator.',
                answer: '1. A competent trained operator\n2. Correct and up-to-date certification',
                category: 'Crane Operations',
                tags: ['hire', 'legal requirements', 'operator'],
                difficulty: 'medium'
            },
            {
                id: '11',
                question: 'Q11) Explain the difference between an employing and user organisation.',
                answer: 'Employing Organisation requires the load to be lifted\nUser Organisation and plan and manoeuvres the lift for the client.',
                category: 'Crane Operations',
                tags: ['organisations', 'responsibilities', 'definitions'],
                difficulty: 'medium'
            },
            {
                id: '12',
                question: 'Q12) Who is responsible for providing the contractor with written details of the work to be done?',
                answer: 'The Employing Organisation',
                category: 'Crane Operations',
                tags: ['employing organisation', 'responsibilities', 'contractor'],
                difficulty: 'easy'
            },
            {
                id: '13',
                question: 'Q13) Where would the information relating to the additional requirements of an intermediate lift over a basic lift be sought?',
                answer: 'Explained in BS 7121, 4.3.2 for basic lift, 4.3.3. for intermediate/standard lift',
                category: 'Crane Operations',
                tags: ['BS 7121', 'lift types', 'standards'],
                difficulty: 'medium'
            },
            {
                id: '14',
                question: 'Q14) To whom should the appointed person give all details involving the lifting operation?',
                answer: 'Crane supervisor and anyone involved.',
                category: 'Crane Operations',
                tags: ['appointed person', 'communication', 'responsibilities'],
                difficulty: 'easy'
            },
            {
                id: '15',
                question: 'Q15) Why is it recommended to complete a report after the completion of the lifting operation?',
                answer: 'To evaluate the lifting operation where good practice can be utilized in future lifts or where the operation could have been planned more effectively. The client/contractor may further require written feedback on the operation.',
                category: 'Crane Operations',
                tags: ['reporting', 'evaluation', 'best practices'],
                difficulty: 'medium'
            },
            {
                id: '16',
                question: 'Q16) A change of crane lifting equipment operator is required. What must they be made aware of before continuing?',
                answer: 'The lift plan and any other relevant issue.',
                category: 'Crane Operations',
                tags: ['operator change', 'lift plan', 'handover'],
                difficulty: 'easy'
            },
            {
                id: '17',
                question: 'Q17) Name TWO duties of the crane operator.',
                answer: '1. Operate crane according to manufactures instructions\n2. Implement the lift plan and safe system of work',
                category: 'Crane Operations',
                tags: ['operator duties', 'responsibilities', 'safety'],
                difficulty: 'easy'
            },
            {
                id: '18',
                question: 'Q18) Describe FOUR factors that need to be taken into account when specifying communication procedures for a lifting operation.',
                answer: '1. Communication method established before the lift\n2. Banksman/Signaller shall be visible/audible at all times\n3. The operator shall obey stop signals whoever gives them\n4. The Person in Charge shall be clearly identified and made known to all members of the lift team and personnel in the proximity.',
                category: 'Crane Operations',
                tags: ['communication', 'procedures', 'safety'],
                difficulty: 'medium'
            },
            {
                id: '19',
                question: 'Q19) If radios are to be used during the lifting operations, what FIVE actions and checks must be made before use?',
                answer: '1. Check if people involved know how to use them\n2. Check if batteries will last for the duration of the operation or spare batteries are supplied\n3. Check if all involved in the lifting are on the same frequency (channel)\n4. Check if the signal strength is sufficient\n5. Check if the frequency is clear from other interferences',
                category: 'Crane Operations',
                tags: ['radios', 'communication', 'checks'],
                difficulty: 'hard'
            },
            {
                id: '20',
                question: 'Q20) Name the FOUR stages of the hierarchy of control for the marshalling of mobile lifting equipment.',
                answer: '1. Elimination/substitution\n2. Engineering\n3. Administration\n4. PPE',
                category: 'Crane Operations',
                tags: ['hierarchy of control', 'marshalling', 'safety'],
                difficulty: 'medium'
            },
            {
                id: '21',
                question: 'Q21) Name THREE factors to be taken into account when devising a mobile lifting equipment marshalling plan.',
                answer: '1. Visibility\n2. Attaching / Detaching and securing loads\n3. Environment',
                category: 'Crane Operations',
                tags: ['marshalling plan', 'factors', 'planning'],
                difficulty: 'medium'
            },
            {
                id: '22',
                question: 'Q22) Name THREE possible effects that fatigue can have on a lifting team',
                answer: '1. Decreased productivity\n2. Reduced safe working ability\n3. Absenteeism',
                category: 'Crane Operations',
                tags: ['fatigue', 'effects', 'safety'],
                difficulty: 'easy'
            },
            {
                id: '23',
                question: 'Q23) Name SIX principle factors should be taken into account in relation to fatigue management of a lifting operation.',
                answer: '1. Comply with your organization\'s policies and procedures relating fatigue\n2. Understand your sleep, rest and recovery needs and obtain adequate rest and sleep away from work\n3. Seek medical advice and assistance if you have a concern about a health condition that affects your sleep or causes fatigue\n4. Look out for signs of fatigue at the people you work with\n5. In consultations with your supervisor, take steps to manage fatigue\n6. Maintain hydration',
                category: 'Crane Operations',
                tags: ['fatigue management', 'safety', 'health'],
                difficulty: 'hard'
            },
            {
                id: '24',
                question: 'Q24) State THREE occasions on which lifting equipment must be thoroughly examined.',
                answer: '1. When lifting equipment is first supplied (used for the first time by the employer)\n2. When certain equipment is installed (e.g. tower crane)\n3. Periodically during the lifetime of the equipment\n4. Following exceptional circumstances',
                category: 'Crane Operations',
                tags: ['thorough examination', 'inspection', 'requirements'],
                difficulty: 'medium'
            },
            {
                id: '25',
                question: 'Q25) How long is a thorough examination for a lifting accessory valid for?',
                answer: '6 months.',
                category: 'Crane Operations',
                tags: ['thorough examination', 'validity', 'accessories'],
                difficulty: 'easy'
            },
            {
                id: '26',
                question: 'Q26) Name FOUR items that must be recorded when a thorough examination on a lifting appliance has been carried out.',
                answer: '1. Defects\n2. SWL\n3. Model of the machine\n4. Examination location',
                category: 'Crane Operations',
                tags: ['recording', 'thorough examination', 'documentation'],
                difficulty: 'medium'
            },
            {
                id: '27',
                question: 'Q27) List TWO methods of obtaining the accurate weight of a load.',
                answer: '1. Manufacturer\'s data\n2. Trial lift (using a weight load cell)',
                category: 'Crane Operations',
                tags: ['load weight', 'measurement', 'methods'],
                difficulty: 'easy'
            },
            {
                id: '28',
                question: 'Q28) During dismantling operations, what factor of safety is applied to the load?',
                answer: 'Minimum of 20%',
                category: 'Crane Operations',
                tags: ['dismantling', 'factor of safety', 'operations'],
                difficulty: 'medium'
            },
            {
                id: '29',
                question: 'Q29) If an object has to be dismantled above ground to be lifted to ground level (and can\'t be returned to the original position), what factor of safety should be applied?',
                answer: '2:1',
                category: 'Crane Operations',
                tags: ['dismantling', 'factor of safety', 'ground level'],
                difficulty: 'medium'
            },
            {
                id: '30',
                question: 'Q30) Name THREE factors(configurations) that determine the rated lifting capacity of lifting equipment.',
                answer: '1. Boom angle\n2. Spread of outriggers\n3. The radius',
                category: 'Crane Operations',
                tags: ['lifting capacity', 'configurations', 'factors'],
                difficulty: 'medium'
            },
            {
                id: '31',
                question: 'Q31) What does the term \'structural strength\' relate to with regard to the lifting capacity of any lifting equipment?',
                answer: 'Structural strength refers to where the maximum SWL is limited by the structural strength of all relevant components. Example boom, outriggers, slew ring, chassis .',
                category: 'Crane Operations',
                tags: ['structural strength', 'lifting capacity', 'components'],
                difficulty: 'medium'
            },
            {
                id: '32',
                question: 'Q32) Name the sections in 7121 where advice is given on \'Lifting without outriggers\' and \'Pick and carry\'.',
                answer: '12.1.5 Lifting without outriggers\n12.1.6 Pick and Carry',
                category: 'Crane Operations',
                tags: ['BS 7121', 'outriggers', 'pick and carry'],
                difficulty: 'medium'
            },
            {
                id: '33',
                question: 'Q33) Define the term \'radius\'.',
                answer: 
